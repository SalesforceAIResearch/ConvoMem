package com.salesforce.crmmembench

import com.salesforce.crmmembench.questions.evidence.generators._
import com.salesforce.crmmembench.Personas
import org.scalatest.funsuite.AnyFunSuite

/**
 * Test class for examining the use case summary prompts generated by evidence generators.
 * This class helps understand what prompts are passed to the LLM for use case generation.
 */
class TestUseCaseSummaryPrompts extends AnyFunSuite {

  // Sample persona for testing
  val testPerson = Personas.Person(
    id = "test-person",
    category = "Professional",
    role_name = "Software Engineer",
    description = "Senior software engineer specializing in backend systems",
    background = Some("I'm a senior software engineer with 8 years of experience building scalable backend systems. I work primarily with Java and Python, and I'm passionate about system architecture and performance optimization.")
  )

  test("UserFactsEvidenceGenerator - Use Case Summary Prompt") {
    val generator = new UserFactsEvidenceGenerator(evidenceCount = 1)
    val prompt = generator.getUseCaseSummaryPrompt(testPerson)
    
    println("="*80)
    println("USER FACTS EVIDENCE GENERATOR - USE CASE SUMMARY PROMPT")
    println("="*80)
    println(prompt)
    println("="*80)
    
    assert(prompt.nonEmpty)
  }

  test("ChangingEvidenceGenerator - Use Case Summary Prompt") {
    val generator = new ChangingEvidenceGenerator(evidenceCount = 2)
    val prompt = generator.getUseCaseSummaryPrompt(testPerson)
    
    println("="*80)
    println("CHANGING EVIDENCE GENERATOR - USE CASE SUMMARY PROMPT")
    println("="*80)
    println(prompt)
    println("="*80)
    
    assert(prompt.nonEmpty)
  }

  test("AbstentionEvidenceGenerator - Use Case Summary Prompt") {
    val generator = new AbstentionEvidenceGenerator(evidenceCount = 2)
    val prompt = generator.getUseCaseSummaryPrompt(testPerson)
    
    println("="*80)
    println("ABSTENTION EVIDENCE GENERATOR - USE CASE SUMMARY PROMPT")
    println("="*80)
    println(prompt)
    println("="*80)
    
    assert(prompt.nonEmpty)
  }

  test("AssistantFactsEvidenceGenerator - Use Case Summary Prompt") {
    val generator = new AssistantFactsEvidenceGenerator(evidenceCount = 2)
    val prompt = generator.getUseCaseSummaryPrompt(testPerson)
    
    println("="*80)
    println("ASSISTANT FACTS EVIDENCE GENERATOR - USE CASE SUMMARY PROMPT")
    println("="*80)
    println(prompt)
    println("="*80)
    
    assert(prompt.nonEmpty)
  }

}